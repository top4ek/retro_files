
                 Ґќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќ€
                 ѓ  Программное обеспечение для  ком- ѓ
                 ѓ пьютера "ВЕКТОР-06Ц":     игровые, ѓ
                 ѓ учебные и прикладные  программы Вы ѓ
                 ѓ можете заказать по адресу: г.Киров ѓ
                 ѓ ул. Карла-Маркса, 126,центр "БАЙТ" ѓ
                 ѓ приемный пункт  "Унисон". А иного- ѓ
                 ѓ родние могут сделать заказ  по ад- ѓ
                 ѓ ресу: г.Киров, 610006,  а/я  1248, ѓ
                 ѓ  Зубкову  Александру  Николаевичу. ѓ
                 ¤ќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќЋ

Ґќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќ€
ѓ Если у Вас есть вопросы и проблемы, связанные с  "ВЕКТОРом-06Ц", ѓ
ѓпредложения и объявления, материалы для статьи или заметки, напи- ѓ
ѓшите  нам. Мы сумеем Вам помочь.  Наш адрес:   г. Киров,  610006, ѓ
ѓа/я 1248, центр "Байт".                                           ѓ
¤ќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќќЋ

        PUTUP
        ”””””

 Всем известна игра "Putup". И, наверное, наскучили уже  15 этажей,
которые Вы прошли, помогая маленькому белому существу  найти  ключ.
Не отчаивайтесь! При желании Вы сможете изменить этажи,как Вам уго-
дно...
 В игре "Putup" блоки этажей располагаются  с  адреса 1С8ЕН, каждый
этаж 11 байт "в высоту" и 16 - "в длину", занимает 176 байт и запи-
сывается в блоке последовательно, байт за байтом,  слева  направо и
сверху вниз.

         Адреса (шестнадцатиричные) начала этажей:

   1 этаж - 1С8Е       6 этаж - 1FFE     11 этаж - 236Е
   2 этаж - 1D3E       7 этаж - 20AЕ     12 этаж - 241Е
   3 этаж - 1DEE       8 этаж - 215Е     13 этаж - 24СЕ
   4 этаж - 1ЕDE       9 этаж - 220Е     14 этаж - 257Е
   5 этаж - 1F4E      10 этаж - 22ВЕ     15 этаж - 262Е

 Обозначения в блоках этажей:

  01 - пусто          06 - огонь       0В - яблоко
  02 - стена          07 - ключ        0С - ананасик
  03 - ограничительё  08 - замок       0D - виноград
  04 - "вопрос"       0D - тайный выход    0Е - жизнь
  05 - тайник         0A - вишенки     0F - "вертолет"(графика)
  11 - "мышь" (существо с глазами и красным хвостиком) графикой.

   В сектор, где стоит ограничитель, может попасть  только  игрок и
самое страшное существо.
 Но в блоках этажей не указано, где появляются существа и выход.Эта
информация содержится с адреса 1С16Н в блоках координат. Координаты
каждого этажа занимают 8 байт и записываются в таком порядке:

 1 байт - горизонтальная координата выхода
 2 байт - вертикальная координата выхода
 3 байт - код первого существа
 4 байт - координата появления его по горизонтали
 5 байт - координата появления его по вертикали
 6 байт - код второго существа
 7 байт - координата появления его по горизонтали
 8 байт - координата появления его по вертикали

 Коды существ:

  01 и 02 - "рогатый" (синее существо)
  03 и 04 - "мышь" (синее существо с глазами и красным хвостиком)
  05 ¶ 08 - "вертолетик"

 Самое страшное - коричневое существо - появляется,  если  в  одном
месте задать появление кодов 09 и 0A. Впрочем, если появится только
код 09, беспокоиться не нужно - коричневое существо будет неподвиж-
но, но не менее опасно.

        Адреса (шестнадцатиричные) блоков координат:

   1 этаж - 1С16       6 этаж - 1С3Е     11 этаж - 1С66
   2 этаж - 1С1Е       7 этаж - 1С46     12 этаж - 1С6Е
   3 этаж - 1С26       8 этаж - 1С4Е     13 этаж - 1С76
   4 этаж - 1С2Е       9 этаж - 1С56     14 этаж - 1С7Е
   5 этаж - 1С36      10 этаж - 1С5Е     15 этаж - 1С86

 Расчет координат: отчет координат из левого верхнего угла, который
имеет координату 00. Соседняя клетка имеет координату 02. Таким об-
разом, координаты по горизонтали будут (слева направо): 00, 02, 04,
06, 08, 0A, 0С, 0Е, 10, 12, 14, 16, 18, 1A, 1С, 1Е и  по  вертикали
(сверху вниз): 00, 02, 04, 06, 08, 0A, 0С, 0Е, 10, 12, 14.  Принцип
же расчета аналогичен тому, который используется школьниками в игре
"Морской бой", только в данном случае поле 16*11 и другие обозначе-
ния координат.
 Успеха в проектировании новых этажей!
 Напоследок информация для тех, кто захочет изменить и заставку.За-
ставка располагается с адреса 0976Н, коды там  аналогичны  тем, что
используются в блоках этажей. Надпись "PUTUP", написанная ягодками,
располагается с адреса 0A06Н. Обозначения там: 9В - ягодка,20 - пу-
стое место.

                    SimBroth company, г.Киров, 1991

      ДЛЯ ТЕХ, КТО ПРОГРАММИРУЕТ НА АССЕМБЛЕРЕ
      ””””””””””””””””””””””””””””””””””””””””

    Подпрограмма десятичного сложения с выводом суммы на экран
    ----------------------------------------------------------

 Подпрограмма является специализированной и ориентирована для выво-
да счета, времени и т.д.
                                    3
  SUMM: ADD M    ;складываем           RAC: LXI H,CIFR ;задаем
                 ;начало области, в кото-
                 ;рой находятся образцы
                 ;дес. цифр

    DAA  ;десят. коррекция      	PUSH H
    MOV M,A  ;запоминаем результат      PUSH PSW
    PUSH PSW ;выводим результат     	ANI 15     ;выделя-
                               			   ;ем мл.
                               			   ;разряд
    PUSH H   ;на экран          	CALL RAC1  ;выводим
                               			   ;его на
                               			   ;экран
    CALL RAC                		POP PSW
    POP H                   		POP H
    POP PSW                 		RRC  ;выделяем ст.
    RNC  ;возврат, если результат   	RRC  ;дес. разряд
         ;уложился в один байт      	RRC
  SUMM1:DCX H   ;переходим на следующие RRC
    MOV A,M  ;два разряда           	ANI 15
    ADI 1    ;добавляем единицу     	JMP RAC1 ;выводим
                             			 ;его на
                             			 ;экран
    DAA  ;десят. коррекция     	   RAC1:JZ RAC2  ;раачиты-
                             			 ;ваем адр.
                             			 ;дес.цифры
    MOV M,A  ;запоминаем результата     RLC  	;умножаем
    PUSH PSW ;вывод результата      	RLC  ;на 8
    PUSH H                              RLC                 
    CALL RAC                            MOV C,A  ;добавляем 
    POP H                               MVI B,0  ;смещение  
    POP PSW                             DAD B    ;относите- 
                                                 ;льно ба-
                                                 ;зового  
                                                 ;адреса  
    JC SUMM1 ;если результат опять не RAC2:PUSH D   ;выводим
         ;уложился в один байт, то   	CALL VC1F;цифру на
                             			 ;экран
         ;переходим на SUMM1        	POP D
    RET                 		DCR D;подготавли-
                             		     ;ваем регистры
  VC1F: MVI C,8  ;п/п вывода            RET  ;для вывода
  VC1F1:MOV A,M  ;образа дес. цифры          ;след.цифры
    STAX D   ;на экран
    INX H
    INX D
    DCR C
    JNZ VC1F1
    RET

 При обращении к п/п в регистрах должна содержаться  следующая  ин-
формация: A - что прибавить, НL - адрес ячеек, которые складываются
с A, DE - адрес вывода на экран. По адресу CIFR  должна  находиться
информация о том, что выводить на экран. На каждую цифру  отводится
по 8 байт, сначала идет 0, 1 и т.д. ... до 9.
 Например, по адресу SCORE у Вас находится результат игры, занимаю-
щий, скажем, шесть десятичных цифр: SCORE:DB 00H,00H,50H. И Вам ну-
жно добавить туда десятичное число 25. Тогда Вы используете следую-
щую последовательность команд: MVI A,25H LXI H,SCORE+2 LXI D,0CDD0H 4
CALL SUMM...
 Подпрограмма выводит два десятичных разряда, если был  перенос, то
следующие два разряда и т.д. Если выводимое число  занимает  только
один разряд из пары, то впереди выводится незначащий ноль.


       BASIC
       ”””””

 С адреса 2D65ш находится подрограмма обработки прерываний.

  2D55H, 2D64H        - таблица цветов (16 байт)
  3С20Н, 3С21Н, 3С22Н - младший, средний и старший байты таймера
  3С23Н           - ячейка скроллинга
  2ЕF1Н           - математич. цвет бордюра
  3С24Н           - признак звучания каналов
  2572Н           - подпрограмма  рисования точки, PLOT. В (В)-
            координата Y, (С) - координата Х, (A) - ре-
            жим (0 - стирание точки, 1 - установка точ-
            ки, 2 - установка граф. курсора)
  26BDH           - п/п рисования линии, в (A) - координата  Y,
            в (С) - Х
  25BFH           - п/п рисования прямоугольника, в (A) - коор-
            дината Y, в (С) - Х
  25ЕСН           - п/п рисования прямоугольника с закраской, в
            (A) - Y, в (С) - Х
  24Е0Н           - п/п COLOR, в (A) - матем. цвет. Предварите-
            льно требуется следующая последовательность
            команд: PUSH PSW  ANI F0  STA 3DB0  POP PSW
            ANI 0F  STA 2EF2  MOV E,A  CALL 24E0.
  19A8H           - п/п PGET, при выходе в (A) - матем.цвет те-
            кущей точки

 Приведенные адреса подпрограмм предназначаются  для программистов,
использующих Бейсик с машинными подпрограммами. Подпрограммы не со-
храняют содержимого регистров, это остается на долю программиста.


      ДЛЯ ТЕХ, КТО ПРОГРАММИРУЕТ НА АССЕМБЛЕРЕ
      ””””””””””””””””””””””””””””””””””””””””

       П/п ввода/вывода в формате эмулятора РК
       ---------------------------------------
             и Монитора-1200
             ---------------

 Уважаемые читатели, на этот раз мы предлагаем Вашему вниманию ста-
ндартные п/п ввода/вывода в формате эмулятора РК-86.
 Физический формат записи на МГ: 256 нулевых байт, E6, ст.байт ад-
реса начала, мл. байт адреса начала, ст.байт адреса конца, мл.байт
адреса конца, информационные байты, E6, ст.байт КС, мл.байт КС.

 Тот же самый алгоритм ввода/вывода используется в формате Монитора
1200. Только следует внести  следующие  изменения:  убрать  строчку
CшANGE: MVI A,0F8ш и CшANGE2: MVI A,0E6ш  CALL OBYTE. Т.е. перед кс
не должен идти синхробайт 0Е6Н.


 ;П/П LOADРК-86  LEN2: INR D       POP B               5
 LOAD: DI         IN 01        	   RET
  LXI H,0         ANI 10H         SR: MOV A,H
  MVI D,40H       CMP E            SUB D
 LOAD1: CALL LEN      JZ LEN2      RNZ
  PUSH D         LEN3: INR D       MOV A,L
  MVI D,0         IN 01        	   SUB E
  MOV E,A         ANI 10H          RET
  DAD D           CMP E       VSP: LHLD KON
  POP D           JNZ LEN3         XCHG
  DCR D           MOV A,D          LHLD NACH
  JNZ LOAD1       POP D        	   LXI B,0
  DAD H           RET          	   RET
  DAD H          BYTE: MVI A,8    PKS: PUSH H
  MOV A,H        BYTE1: PUSH B     ADD C
  RRC             PUSH D           MOV C,A
  ANI 7FH         MVI C,0          PUSH PSW
  ADD H           MOV D,A          CALL SR
  STA CONR        IN 01        	   JZ PKS1
  MVI A,0F8H      ANI 10H          POP PSW
  CALL BYTE1      MOV E,A          MOV A,B
  STA NACH+1     BYTE2: IN 01      ADC M
  CALL BYTE       ANI 10H          MOV B,A
  STA NACH        CMP E       PKS2: MOV H,B
  CALL BYTE       JZ BYTE2         MOV L,C
  STA KON+1       RLC          	   SHLD KS
  CALL BYTE       RLC              POP H
  STA KON         RLC          	   CALL SR
  CALL VSP        RLC          	   INX H
 LOAD3: CALL BYTE MOV A,C          RET
  MOV M,A         RAL         PKS1: POP PSW
  CALL PKS        MOV C,A          JMP PKS2
  JNZ LOAD3       PUSH PSW
 CHANGE: MVI A,0F8H   LDA CONR        ;П/П SAVEPK-86
  CALL BYTE1      MOV B,A          DI
  MOV D,A         POP PSW          CALL SAVE12
  CALL BYTE      BYTE3: DCR B      LHLD NACH
  MOV E,A         JNZ BYTE3        PUSH H
  LHLD KS         IN 01        	   CALL SAVE2
  CALL SR         ANI 10H          LHLD KON
  RZ              MOV E,A          CALL SAVE2
  MVI A,1         MOV A,D          XCHG
  STA ERROR       ORA A        	   POP H
  RET             JP BYTE5         LXI B,0
 KS: DW 0         MOV A,C         SAVE3: MOV A,M
 NACH: DW 0       CPI 0E6H         CALL OBYTE
 KON: DW 0        JNZ BYTE4        CALL SAVE14
 ERROR: DB 0      XRA A            JNZ SAVE3
 PRINV: DB 0      STA PRINV       CHANGE2: MVI A,0E6H
 CONR: DB 4BH     JMP BYTE6        CALL OBYTE
 LEN: PUSH D     BYTE4: CPI 19H    MOV H,B
  MVI D,0         JNZ BYTE2        MOV L,C
  IN 01           MVI A,255        CALL SAVE2
  ANI 10H         STA PRINV        EI
  MOV E,A        BYTE6: MVI D,9    RET
 LEN1: IN 01     BYTE5: DCR D     SAVE12: XRA A
  ANI 10H         JNZ BYTE2        MOV B,A
  CMP E           LDA PRINV       SAVE13: CALL OBYTE
  JZ LEN1         XRA C            DCR B
  MOV E,A         POP D            JNZ SAVE13
  MVI A,0E6H      CALL VSP         PUSH D          CALL OBYTE2  6
  JMP OBYTE       INX H            PUSH PSW        DCR C
 SAVE14: PUSH H   RET              MOV D,A         JNZ OBYTE1
  ADD C        SAVE15: POP PSW     MVI C,8         POP PSW
  MOV C,A         JMP SAVE16      OBYTE1: MOV A,D  POP D
  PUSH PSW        SAVE2: MOV A,H   RLC       	   POP B
  CALL SR         CALL OBYTE       MOV D,A         RET
  JZ SAVE15       MOV A,L          MVI A,1      OBYTE2: PUSH PSW
  POP PSW         JMP OBYTE        XRA D           LDA CONZAP
  MOV A,B      SR: MOV A,H         ANI 1           MOV B,A
  ADC M           SUB D            OUT 0           POP PSW
  MOV B,A         RNZ              CALL OBYTE2  OBYTE3: DCR B
 SAVE16: MOV H,B  MOV A,L          MVI A,0         JNZ OBYTE3
  MOV L,C         SUB E            XRA D           RET
  SHLD KS        RET               ANI 1        CONZAP: DB 46H
  POP H        OBYTE: PUSH B       OUT 0

    ФИЗИЧЕСКИЙ ФОРМАТ ЗАПИСИ НА МЛ
    ””””””””””””””””””””””””””””””
     В ФОРМАТЕ ЗАГРУЗЧИКА
     ””””””””””””””””””””

 Вначале передается преамбула: 4 серии блоков (25 нулей  и  25  код
55Н).
 Затем передаются информационные блоки.Каждый блок начинается с се-
рии: 16 нулей, 4 байта - 55Н, 1 байт - 0Е6Н, 4 байта - 0, 30 байт -
заголовок блока (включает идентификатор "NODISC00", имя файла и ра-
сширение - 11 байт, дата - 6 байт, начальный адрес загрузки програ-
ммы, количество блоков, остаток блоков для передачи), 1 байт - кон-
трольная сумма.
 Каждый передаваемый блок состоит из 8 подблоков,каждый из которых,
в свою очередь, имеет  свой  собственный  заголовок:  4  байта - 0,
1 байт - 0Е6Н,1 байт - счетчик (при двойной записи для первого бло-
ка 80...87, для второго - 88...8F), 1 байт - контрольная сумма  за-
головка блока.Затем следуют 32 байта собственно информации и 1 байт
контрольная сумма.

  ;п/п записи в формате ROM   		EI        		DCR D
   ORG 8000H             	ZAP6: 	JMP ZAP6 		JNZ NBYTE
   MVI A,88H             	BLOK: 	PUSH B   		RET
   OUT 0              			PUSH H  	BYTE: 	PUSH B
   MVI A,0C9H             		PUSH D        		PUSH D
   STA 38H            			MVI D,10H     		PUSH PSW
   DI                 			XRA A     		MOV D,A
  ZAP: LXI H,SHAPKA       		CALL NBYTE    		MVI A,0
   LXI SP,9300H           		MVI D,4       		ANI 0EH
   PUSH B             			MVI A,55H     		MOV E,A
   PUSH D             			CALL NBYTE    		MVI C,8
   PUSH H             			MVI A,0E6H  	BYTE1:	MOV A,D
   MVI E,0            			CALL BYTE     		RLC
   MVI B,1BH              		XRA A     		MOV D,A
  ZAP1: MOV A,M           		MVI D,4       		MVI A,1
   ADD E              			CALL NBYTE    		XRA D
   MOV E,A            			MVI D,1DH     		ANI 01
   INX H             		BLOK1: 	MOV A,M 		ORA E
   DCR B              			CALL BYTE     		OUT 1
   JNZ ZAP1           			INX H     		CALL ZAD
   MOV B,M            			DCR D     		MVI A,0
   INX H              			JNZ BLOK1     		XRA D
   ADD M              			MOV A,C       		ANI 1
   MOV E,A            			CALL BYTE     		ORA E          7
   MOV C,M            			LDA M1        		OUT 1
   INX H              			ADD C     		CALL ZAD
   MOV D,M            			CALL BYTE     		DCR C
   MOV A,B            			STA M2        		JNZ BYTE1
   ADD D              			POP D     		POP PSW
   DCX H              			MVI H,8       		POP D
   DCX H             		BLOK3: 	MVI L,20H   		POP B
   MOV M,A            			PUSH D        		RET
   ADD E              			XRA A        	ZAD:	PUSH PSW
   STA M1                     		MVI D,4           	LDA CONZAP
   MVI H,4            			CALL NBYTE    		MOV B,A
  ZAP4: MVI L,19H         		POP D     		POP PSW
  ZAP2: XRA A             		MVI A,0E6H     	ZAD1:	DCR B
   CALL BYTE              		CALL BYTE     		JNZ ZAD1
   DCR L              			LDA M2        		RET
   JNZ ZAP2           			ADD B        	SHAPKA:	DB 'NODISC000
   MVI L,19H              		MOV C,A            	    30591COPY
  ZAP3: MVI A,55H         		MOV A,B                     V4 COM',0
   CALL BYTE              		CALL BYTE        	DB 0,40H,1BH,0,0
   DCR L              			LDA M2             		ѓ   ѓ
   JNZ ZAP3           			CALL BYTE          		ѓ   ђ” число
   DCR H             		BLOK2: 	LDAX D       			ѓ      блоков
   JNZ ZAP4           			INR E          			ѓ
   POP H              			CALL BYTE          		ђ””” нач.блок
   PUSH B             			ADD C
   MOV D,B            			MOV C,A
   MVI E,0            			DCR L        	M1:	DB 0
  ZAP5: MVI B,80H         		JNZ BLOK2      	M2:	DB 0
   CALL BLOK              		MOV A,C		CONZAP:	DB 20H
   MVI E,0            			CALL BYTE
   MVI B,88H              		INR B
   CALL BLOK              		DCR H
   INR D              			JNZ BLOK3
   DCR C              			POP H
   JNZ ZAP5           			POP B
   POP B              			RET
                 		NBYTE:	CALL BYTE



         ДОРАБОТКА ДЖОЙСТИКА =ПУ=
         ””””””””””””””””””””””””

 Многие  пользователи  БПЭВМ "Вектор-06Ц"  уже  подключили джойстик
=ПУ=.
 Его отличия от имеющихся типов  джойстиков (Джойстик С, Джойстик П
и аппаратный джойстик): простота подключения,не требующая переделки
(вскрытия) компьютера; простота опроса; возможность работы  с прог-
раммами без переключения: джойстик или клавиатура, т.к. сканируется
и клавиатура и джойстик (с преимуществом у клавиатуры).
 Однако, у джостика есть один недостаток: во многих  программах не-
обходимы 2 клавиши "FIRE" (пробел).
 Этот недостаток легко устранить, если доработать подключение джой-
стика.
 Теперь подключение джойстика следует производить по следующей схе-
ме (сравните со схемой в "Байте-3"):

               =ПУ=                    8
       Є”””””””””””””””””””””””””””””””Џ
       ѓ -  -  -  -  -  -  -  -  -  -  ѓ
       ѓ                   ѓ
       ѓ -  -  -  -  -  -  -  -  -  -  ѓ
       ѓ A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 ѓ
       ѓ ’  ’  ’  ’  ’  ’  ’  -  -  -  ѓ
       ђ”•””•””•””•””•””•””•”””””””””””©
     ѓ  ѓ  ѓ  ѓ  ѓ  ѓ  ѓ
     ѓ  ‘  ‘  ‘  ‘  ‘  ‘      FIRE1 - основная
     ѓ      F  F
     ѓ      I  I      FIRE2 - вспомогательная
     ѓ  ё  ¶  №  ·  R  R
     ѓ      E  E
     ѓ      1  2
     ѓ  ’  ’  ’  ’  ’  ’
     ђ””‘””‘””‘””‘””‘””‘

 Для ранее подключивших джойстик доработка потребует минимум усилий
т.к. во всех, имеющихся в продаже,джойстиков имеются 2 клавиши "FI-
RE".
 Все программы полностью совместимы с доработкой (при необходимости
в них производится и опрос клавиши "FIRE2").
 И в заключение для программистов:
Опрос джойстика производится через порт 07 [ IN 07, INP(07) ].
 При этом:      бит 2 - клавиша "FIRE2" (вспомогательная)
        бит 3 - клавиша "FIRE1" (основная)
        бит 4 - клавиша "влево"
        бит 5 - клавиша "вниз"
        бит 6 - клавиша "вправо"
        бит 7 - клавиша "вверх"

 Если бит равен 1, то клавиша нажата, если 0, то нет.

 Приведенная ниже п/п предназначена для программистов, программиру-
ющих на Ассемблере. Обращение по CALL JOY. П/п не изменяет значения
регистров, выходной параметр: в аккумуляторе (A) - код. Занимает 17
байт памяти.

 JOY: PUSH B  ; сохраняем рег. пару ВС            Выходной
      XRA A   ; обнуляем аккумулятор              параметр:
      OUT 07  ; обнуляем порт 07              в (A)-код
      IN 07   ; считываем число из порта 07
      MOV B,A ; сохраняем его в регистре В       бит: 0-"СС"
      IN 01   ; считываем число из порта 01       1-"УС"
      ANI 60H ; выделяем биты клавиш "УС" и "СС"      2-"FIRE2"
      RAL     ; передвигаем их на 3 разряда влево     3-"FIRE1"
      RAL                         4-"·"
      RAL                         5-"№"
      ORA B   ; "накладываем" регистр В на аккумулятор    6-"¶"
      POP B   ; восстанавливаем рег. пару ВС          7-"ё"
      RET     ; возврат из п/п

 P.S. В центре "Байт" Вы можете приобрести программы,адаптированные
под джойстик =ПУ= (Joystick & Keyboard). Они отмечены  в каталоге -
(J&K).

                          ТМК Soft;г.Киров-1991


